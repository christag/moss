# ============================================================================
# M.O.S.S. Production Environment Configuration
# Copy this file to .env.production and configure with your production values
# ============================================================================

# ============================================================================
# CORE APPLICATION SETTINGS (REQUIRED)
# ============================================================================

# Application URL (used for callbacks, emails, etc.)
NEXT_PUBLIC_APP_URL=https://moss.yourdomain.com
NEXTAUTH_URL=https://moss.yourdomain.com

# NextAuth Secret (generate with: openssl rand -base64 32)
NEXTAUTH_SECRET=CHANGE_THIS_TO_A_RANDOM_SECRET

# Node Environment
NODE_ENV=production

# Application Port (internal, mapped by docker-compose)
PORT=3000
APP_PORT=3000

# ============================================================================
# DATABASE CONFIGURATION (REQUIRED)
# ============================================================================

# PostgreSQL Connection
POSTGRES_DB=moss
POSTGRES_USER=moss
POSTGRES_PASSWORD=CHANGE_THIS_SECURE_PASSWORD

# Full connection string (automatically constructed in docker-compose)
# DATABASE_URL=postgresql://moss:password@postgres:5432/moss

# ============================================================================
# REDIS CONFIGURATION (REQUIRED)
# ============================================================================

# Redis Password (generate with: openssl rand -base64 32)
REDIS_PASSWORD=CHANGE_THIS_REDIS_PASSWORD

# Redis URL (automatically constructed in docker-compose)
# REDIS_URL=redis://:password@redis:6379

# ============================================================================
# BRANDING SETTINGS (OPTIONAL - overrides database settings)
# ============================================================================

# Site name displayed in header and browser title
MOSS_SITE_NAME=M.O.S.S.

# Logo and favicon URLs (leave empty to use defaults)
MOSS_LOGO_URL=
MOSS_FAVICON_URL=

# Brand colors (hex format with #)
MOSS_PRIMARY_COLOR=#1C7FF2
MOSS_BACKGROUND_COLOR=#FAF9F5
MOSS_TEXT_COLOR=#231F20
MOSS_ACCENT_COLOR=#28C077

# ============================================================================
# AUTHENTICATION SETTINGS (OPTIONAL - overrides database settings)
# ============================================================================

# Authentication backend: local, ldap, saml
MOSS_AUTH_BACKEND=local

# Multi-factor authentication
MOSS_MFA_REQUIRED=false

# Session timeout in seconds (default: 2592000 = 30 days)
MOSS_SESSION_TIMEOUT=2592000

# Password requirements
MOSS_PASSWORD_MIN_LENGTH=8
MOSS_PASSWORD_REQUIRE_UPPERCASE=true
MOSS_PASSWORD_REQUIRE_LOWERCASE=true
MOSS_PASSWORD_REQUIRE_NUMBERS=true
MOSS_PASSWORD_REQUIRE_SPECIAL=false

# SAML 2.0 Settings (if using SAML authentication)
MOSS_SAML_ENABLED=false
MOSS_SAML_IDP_ENTITY_ID=
MOSS_SAML_IDP_SSO_URL=
MOSS_SAML_IDP_CERTIFICATE=

# ============================================================================
# STORAGE SETTINGS (OPTIONAL - overrides database settings)
# ============================================================================

# Storage backend: local, nfs, smb, s3
MOSS_STORAGE_BACKEND=local

# Local Storage Configuration
MOSS_STORAGE_LOCAL_PATH=/app/uploads

# S3-Compatible Storage (AWS S3, Cloudflare R2, MinIO, etc.)
# For Cloudflare R2: https://<account-id>.r2.cloudflarestorage.com
MOSS_S3_ENDPOINT=
MOSS_S3_BUCKET=
MOSS_S3_REGION=us-east-1
MOSS_S3_ACCESS_KEY=
MOSS_S3_SECRET_KEY=

# NFS Storage Configuration
MOSS_NFS_SERVER=
MOSS_NFS_PATH=

# SMB/CIFS Storage Configuration
MOSS_SMB_SERVER=
MOSS_SMB_SHARE=
MOSS_SMB_USERNAME=
MOSS_SMB_PASSWORD=

# ============================================================================
# NOTIFICATION SETTINGS (OPTIONAL - overrides database settings)
# ============================================================================

# SMTP Email Configuration
MOSS_SMTP_ENABLED=false
MOSS_SMTP_HOST=
MOSS_SMTP_PORT=587
MOSS_SMTP_USERNAME=
MOSS_SMTP_PASSWORD=
MOSS_SMTP_FROM_ADDRESS=
MOSS_SMTP_FROM_NAME=M.O.S.S.
MOSS_SMTP_USE_TLS=true

# ============================================================================
# GENERAL SETTINGS (OPTIONAL - overrides database settings)
# ============================================================================

# Timezone (IANA timezone identifier, e.g., America/New_York, Europe/London)
MOSS_TIMEZONE=UTC

# Date format (YYYY-MM-DD, DD/MM/YYYY, MM/DD/YYYY)
MOSS_DATE_FORMAT=YYYY-MM-DD

# Default pagination (items per page in lists)
MOSS_ITEMS_PER_PAGE=50

# ============================================================================
# FILE UPLOAD SETTINGS (OPTIONAL)
# ============================================================================

# Maximum file size in megabytes
MOSS_MAX_FILE_SIZE_MB=50

# Allowed MIME types (comma-separated)
MOSS_ALLOWED_MIME_TYPES=image/*,application/pdf,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,text/*,application/zip

# ============================================================================
# BACKUP SETTINGS (OPTIONAL - overrides database settings)
# ============================================================================

# Automatic database backups
MOSS_BACKUP_ENABLED=false
MOSS_BACKUP_FREQUENCY=daily
MOSS_BACKUP_RETENTION_DAYS=30

# ============================================================================
# INTEGRATION SETTINGS (OPTIONAL)
# ============================================================================

# External integrations can be configured through the admin UI
# or via environment variables with the pattern: MOSS_INTEGRATION_<NAME>_<KEY>

# Example: Okta Integration
# MOSS_INTEGRATION_OKTA_DOMAIN=yourdomain.okta.com
# MOSS_INTEGRATION_OKTA_API_TOKEN=your_api_token

# Example: Jamf Pro Integration
# MOSS_INTEGRATION_JAMF_URL=https://yourinstance.jamfcloud.com
# MOSS_INTEGRATION_JAMF_USERNAME=api_user
# MOSS_INTEGRATION_JAMF_PASSWORD=api_password

# ============================================================================
# ADVANCED SETTINGS (USUALLY NOT NEEDED)
# ============================================================================

# Log level: error, warn, info, debug
LOG_LEVEL=info

# Rate limiting (requests per minute per IP)
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# Session encryption key (generate with: openssl rand -base64 32)
# SESSION_ENCRYPTION_KEY=

# ============================================================================
# NOTES
# ============================================================================
# 1. All MOSS_* environment variables override database system_settings
# 2. Database settings can still be changed via the admin UI at /admin
# 3. Environment variables take precedence over database settings
# 4. Changes to environment variables require container restart
# 5. Changes to database settings take effect immediately (with 1-minute cache)
# 6. Never commit .env.production with real secrets to version control
# 7. Use docker secrets or Kubernetes secrets for sensitive production values
